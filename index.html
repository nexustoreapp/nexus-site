<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Nexus ‚Äî Tecnologia com pre√ßo inteligente</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="icon" href="favicon.png?v=3" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="nexus-widget.css?v=3" />
</head>

<body>

<header class="topbar">
  <a href="index.html" class="brand">
    <img src="logo.png" class="brand-logo" />
    <span class="brand-name">Nexus</span>
  </a>

  <button class="nav-toggle" id="navToggle">
    <span class="bar"></span>
    <span class="bar"></span>
    <span class="bar"></span>
  </button>

  <nav class="nav" id="navMenu">
    <a href="index.html" class="nav-link active">In√≠cio</a>
    <a href="buscar.html" class="nav-link">Buscar</a>
    <a href="dashboard.html" class="nav-link">Minha √°rea</a>
    <a href="login.html" class="nav-link">Entrar</a>
  </nav>
</header>

<main>

<section class="hero" style="padding-bottom:24px;">
  <div class="hero-inner">

    <h1 class="hero-title">
      Tecnologia com <span class="highlight">pre√ßo inteligente</span>.
    </h1>

    <p class="hero-subtitle">
      Cat√°logo real, produtos ativos e automa√ß√£o que trabalha para voc√™ comprar melhor.
    </p>

    <div class="hero-search">
      <input
        type="text"
        id="home-query"
        class="input-search"
        placeholder="Ex: RTX 4060, Ryzen 5, SSD 1TB, Headset gamer..."
      />
      <button class="btn-primary" onclick="goSearch()">Buscar agora</button>
    </div>

  </div>
</section>

<section class="section" style="background:rgba(255,255,255,0.02);padding:32px 0;">
  <div class="section-header">
    <h2>Explore por categoria</h2>
    <p>O que voc√™ procura hoje?</p>
  </div>

  <div class="grid-cards">
    <a href="buscar.html?category=gpu" class="card-info">üéÆ Placas de v√≠deo</a>
    <a href="buscar.html?category=cpu" class="card-info">üß† Processadores</a>
    <a href="buscar.html?category=storage" class="card-info">üíæ Armazenamento</a>
    <a href="buscar.html?category=ram" class="card-info">üß¨ Mem√≥ria RAM</a>
    <a href="buscar.html?category=peripherals" class="card-info">üñ•Ô∏è Perif√©ricos</a>
    <a href="buscar.html?category=accessories" class="card-info">üîå Acess√≥rios</a>
  </div>
</section>

<section class="section">
  <div class="section-header">
    <h2>üî• Em destaque agora</h2>
    <p>Produtos com pre√ßo e disponibilidade atualizados.</p>
  </div>

  <div id="home-live-products" class="results-grid">
    <!-- cards entram aqui -->
  </div>
</section>

</main>

<footer class="footer">
  Nexus ¬© 2025 ‚Äî Loja de tecnologia com decis√£o inteligente.
</footer>

<script>
function goSearch() {
  const q = document.getElementById("home-query").value.trim();
  if (!q) return;
  window.location.href = `buscar.html?q=${encodeURIComponent(q)}`;
}

const navToggle = document.getElementById("navToggle");
const navMenu = document.getElementById("navMenu");
if (navToggle && navMenu) {
  navToggle.addEventListener("click", () => {
    navMenu.classList.toggle("nav-open");
  });
}
</script>

<!-- ‚úÖ CONFIG CENTRAL -->
<script src="config.js"></script>

<script src="nexus-widget.js?v=3"></script>

<script>
async function loadHomeProducts() {
  try {
    const API = window.NEXUS_API;
    const r = await fetch(`${API}/shopify/products?limit=12`);
    const data = await r.json();

    const grid = document.getElementById("home-live-products");
    if (!grid) return;

    // Se a API ainda n√£o tem produtos, pelo menos n√£o deixa vazio sem texto:
    if (!data.ok) {
      grid.innerHTML = "<p>N√£o foi poss√≠vel carregar produtos agora.</p>";
      return;
    }

    if (!data.products || data.products.length === 0) {
      grid.innerHTML = "<p>Nenhum produto dispon√≠vel ainda.</p>";
      return;
    }

    grid.innerHTML = "";

    data.products.forEach(p => {
      const card = document.createElement("div");
      card.className = "result-card";

      card.innerHTML = `
        <div class="card-image">
          <img src="${p.image || "fallback.png"}" alt="${p.title}">
        </div>
        <div class="card-body">
          <div class="card-title">${p.title}</div>
          <div class="card-price">
            ${p.price ? "R$ " + p.price.toLocaleString("pt-BR") : "Sob consulta"}
          </div>
          <a href="produto.html?handle=${encodeURIComponent(p.handle)}" class="btn-primary">
            Ver produto
          </a>
        </div>
      `;

      grid.appendChild(card);
    });
  } catch (e) {
    const grid = document.getElementById("home-live-products");
    if (grid) grid.innerHTML = "<p>Erro ao carregar produtos.</p>";
  }
}

document.addEventListener("DOMContentLoaded", loadHomeProducts);
</script>

</body>
</html>