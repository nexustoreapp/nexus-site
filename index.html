<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Nexus â€” Tecnologia com preÃ§o inteligente</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="icon" href="favicon.png?v=3" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="nexus-widget.css?v=3" />
</head>

<body>

<!-- ================= NAV ================= -->
<header class="topbar">
  <a href="index.html" class="brand">
    <img src="logo.png" class="brand-logo" />
    <span class="brand-name">Nexus</span>
  </a>

  <button class="nav-toggle" id="navToggle">
    <span class="bar"></span>
    <span class="bar"></span>
    <span class="bar"></span>
  </button>

  <nav class="nav" id="navMenu">
    <a href="index.html" class="nav-link active">InÃ­cio</a>
    <a href="buscar.html" class="nav-link">Buscar</a>
    <a href="dashboard.html" class="nav-link">Minha Ã¡rea</a>
    <a href="login.html" class="nav-link">Entrar</a>
  </nav>
</header>

<main>

<!-- ================= HERO ================= -->
<section class="hero" style="padding-bottom:24px;">
  <div class="hero-inner">

    <h1 class="hero-title">
      Tecnologia com <span class="highlight">preÃ§o inteligente</span>.
    </h1>

    <p class="hero-subtitle">
      CatÃ¡logo real, produtos ativos e automaÃ§Ã£o que trabalha para vocÃª comprar melhor.
    </p>

    <div class="hero-search">
      <input
        type="text"
        id="home-query"
        class="input-search"
        placeholder="Ex: RTX 4060, Ryzen 5, SSD 1TB, Headset gamer..."
      />
      <button class="btn-primary" onclick="goSearch()">Buscar agora</button>
    </div>

  </div>
</section>

<!-- ================= CATEGORIAS ================= -->
<section class="section" style="background:rgba(255,255,255,0.02);padding:32px 0;">
  <div class="section-header">
    <h2>Explore por categoria</h2>
    <p>O que vocÃª procura hoje?</p>
  </div>

  <div class="grid-cards">
    <a href="buscar.html?category=gpu" class="card-info">ğŸ® Placas de vÃ­deo</a>
    <a href="buscar.html?category=cpu" class="card-info">ğŸ§  Processadores</a>
    <a href="buscar.html?category=storage" class="card-info">ğŸ’¾ Armazenamento</a>
    <a href="buscar.html?category=ram" class="card-info">ğŸ§¬ MemÃ³ria RAM</a>
    <a href="buscar.html?category=peripherals" class="card-info">ğŸ–¥ï¸ PerifÃ©ricos</a>
    <a href="buscar.html?category=accessories" class="card-info">ğŸ”Œ AcessÃ³rios</a>
  </div>
</section>

<!-- ================= PRODUTOS REAIS ================= -->
<section class="section">
  <div class="section-header">
    <h2>ğŸ”¥ Em destaque agora</h2>
    <p>Produtos com preÃ§o e disponibilidade atualizados.</p>
  </div>

  <div id="home-live-products" class="results-grid">
    <!-- cards reais entram aqui -->
  </div>
</section>

</main>

<footer class="footer">
  Nexus Â© 2025 â€” Loja de tecnologia com decisÃ£o inteligente.
</footer>

<!-- ================= JS ================= -->
<script>
function goSearch() {
  const q = document.getElementById("home-query").value.trim();
  if (!q) return;
  window.location.href = `buscar.html?q=${encodeURIComponent(q)}`;
}

const navToggle = document.getElementById("navToggle");
const navMenu = document.getElementById("navMenu");
if (navToggle && navMenu) {
  navToggle.addEventListener("click", () => {
    navMenu.classList.toggle("nav-open");
  });
}
</script>

<script src="nexus-widget.js?v=3"></script>

<script>
<script>
const API = "/api";

async function loadHomeProducts() {
  try {
    const r = await fetch(`${API}/shopify/products?limit=12`);
    const data = await r.json();
    if (!data.ok) return;

    const grid = document.getElementById("home-live-products");
    if (!grid) return;

    grid.innerHTML = "";

    data.products.forEach(p => {
      const card = document.createElement("div");
      card.className = "result-card";

      card.innerHTML = `
        <div class="card-image">
          <img src="${p.image || "/fallback.png"}" alt="${p.title}">
        </div>
        <div class="card-body">
          <div class="card-title">${p.title}</div>
          <div class="card-price">
            ${p.price ? "R$ " + p.price.toLocaleString("pt-BR") : "Sob consulta"}
          </div>
          <a href="produto.html?handle=${p.handle}" class="btn-primary">
            Ver produto
          </a>
        </div>
      `;

      grid.appendChild(card);
    });
  } catch (e) {
    console.error("Erro ao carregar produtos da home", e);
  }
}

document.addEventListener("DOMContentLoaded", loadHomeProducts);
</script>
</script>

</body>
</html>